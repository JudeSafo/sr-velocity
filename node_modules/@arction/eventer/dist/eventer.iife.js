var eventer=function(t){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,r)};function r(t){var n="function"==typeof Symbol&&t[Symbol.iterator],r=0;return n?n.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function i(t,n){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,o,e=r.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(i=e.next()).done;)u.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(r=e.return)&&r.call(e)}finally{if(o)throw o.error}}return u}function o(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(i(arguments[n]));return t}var e=function(t){function r(n){var i,o="EventError: "+n+"}";return i=t.call(this,o)||this,Object.setPrototypeOf(i,r.prototype),i}return function(t,r){function i(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}(r,t),r}(Error),u=function(t,n){return{token:t+"-"+n,ownerIndex:t,id:n}},f=0,c=function(t,n){return new e("Event listener with "+t.token+" id does not exist at Eventer with "+n+" id.")},a=function(){function t(){this.id=++f,this.lastEventIndex=0,this.topics=new Map}return t.prototype.on=function(t,n,r){var i=this.topics.get(t),o=r||u(this.id,++this.lastEventIndex);return i?i.set(o,n):this.topics.set(t,new Map([[o,n]])),o},t.prototype.has=function(t,n){var o,u;if(n)return(h=this.topics.get(n))?(s=h.get(t))||c(t,this.id):new e("Eventer with "+t.ownerIndex+" does not have "+n+".");try{for(var f=r(this.topics),a=f.next();!a.done;a=f.next()){var h,s,v=i(a.value,2);v[0];if(s=(h=v[1]).get(t))return s}}catch(t){o={error:t}}finally{try{a&&!a.done&&(u=f.return)&&u.call(f)}finally{if(o)throw o.error}}return c(t,this.id)},t.prototype.off=function(t,n){var o,e;if(n)return!(!(c=this.topics.get(n))||!c.delete(t));try{for(var u=r(this.topics),f=u.next();!f.done;f=u.next()){var c,a=i(f.value,2);a[0];if((c=a[1]).delete(t))return!0}}catch(t){o={error:t}}finally{try{f&&!f.done&&(e=u.return)&&e.call(u)}finally{if(o)throw o.error}}return!1},t.prototype.allOff=function(){return this.topics.clear(),this},t.prototype.topicOff=function(t){return this.topics.delete(t)},t.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.topics.get(t),e=0;return i&&i.forEach(function(t){t.apply(void 0,o(n)),e++}),e},t.prototype.listeners=function(t){var n=this.topics.get(t);return n||new Map},t}();return t.EventError=e,t.Eventer=a,t.Token=u,t}({});